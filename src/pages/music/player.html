<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Music Player</title>
    <link rel="stylesheet" href="../../assets/css/all.css">
    <link rel="stylesheet" href="../../assets/css/player.css">
</head>

<body>
    <div class="popup-player">
        <div class="player-left">
            <!-- 로고 및 음악 정보 -->
            <div class="logo">
                <img src="../../assets/images/cuteddagenie.png" alt="logo" style="height: 50px;">
            </div>
            <div class="album-info">
                <div class="info-container">
                    <div class="track-details">
                        <h2>곡 제목</h2>
                        <p>가수 이름</p>
                    </div>
                    <div class="like-icon" id="like-btn">
                        <span>&hearts;</span>
                    </div>
                </div>
                <img src="../../assets/images/logo.webp" alt="Album Cover" class="album-cover">
            </div>
            <!-- 음악 컨트롤러 -->
            <audio id="audio-player" controls>
                <source id="audio-source" src="../../assets/musicfile/Color_Out_-_Host.mp3" type="audio/mp3">
            </audio>
        </div>
        <div class="playlist-right">
            <div class="user-info">
                <span class="user-id">로그인하세요 ></span>
                <button>로그아웃</button>
            </div>

            <!-- 탭 버튼들 -->
            <div class="tab-header">
                <button id="playlist-tab" class="tab-button active">재생목록 (2)</button>
                <button id="my-music-tab" class="tab-button">마이뮤직</button>
            </div>

            <!-- 재생목록 탭 콘텐츠 -->
            <div id="playlist-content" class="tab-content active">
                <div class="playlist-controls">
                    <button>중복곡 삭제</button>
                </div>
                <ul class="playlist" id="playlist">
                    <li>
                        <input type="checkbox">
                        <div>
                            <p>HAPPY</p>
                            <p>DAY6 (데이식스)</p>
                        </div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div>
                            <p>HAPPY</p>
                            <p>DAY6 (데이식스)</p>
                        </div>
                    </li>
                </ul>

                <!-- 재생목록 푸터 -->
                <div class="playlist-footer">
                    <button id="add-to-my-music">담기</button>
                    <button id="delete-from-playlist">삭제</button>
                    <div class="footer-pagination">
                        <p>0곡 / 2곡</p>
                    </div>
                </div>
            </div>

            <!-- 마이뮤직 탭 콘텐츠 -->
            <div id="my-music-content" class="tab-content">
                <ul class="playlist" id="my-music">
                    <li><input type="checkbox"> 나의 음악 1</li>
                    <li><input type="checkbox"> 나의 음악 2</li>
                    <li><input type="checkbox"> 나의 음악 3</li>
                    <li><input type="checkbox"> 나의 음악 4</li>
                    <li><input type="checkbox"> 나의 음악 5</li>
                    <li><input type="checkbox"> 나의 음악 6</li>
                    <li><input type="checkbox"> 나의 음악 7</li>
                    <li><input type="checkbox"> 나의 음악 8</li>
                    <li><input type="checkbox"> 나의 음악 9</li>
                </ul>

                <!-- 마이뮤직 푸터 -->
                <div class="playlist-footer">
                    <button id="delete-from-my-music">삭제</button>
                    <div class="footer-pagination">
                        <p>0곡 / 3곡</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 탭 전환 기능
        document.addEventListener('DOMContentLoaded', function () {
            const playlistTab = document.getElementById('playlist-tab');
            const myMusicTab = document.getElementById('my-music-tab');
            const playlistContent = document.getElementById('playlist-content');
            const myMusicContent = document.getElementById('my-music-content');
            const addToMyMusicButton = document.getElementById('add-to-my-music');
            const deleteFromPlaylistButton = document.getElementById('delete-from-playlist');
            const deleteFromMyMusicButton = document.getElementById('delete-from-my-music');

            // 탭 전환 기능
            playlistTab.addEventListener('click', function () {
                playlistTab.classList.add('active');
                myMusicTab.classList.remove('active');
                playlistContent.classList.add('active');
                myMusicContent.classList.remove('active');
            });

            myMusicTab.addEventListener('click', function () {
                myMusicTab.classList.add('active');
                playlistTab.classList.remove('active');
                myMusicContent.classList.add('active');
                playlistContent.classList.remove('active');
            });

            // 담기 버튼 클릭 시 마이뮤직에 추가
            addToMyMusicButton.addEventListener('click', function () {
                const selectedSongs = document.querySelectorAll('#playlist input[type="checkbox"]:checked');
                const myMusicList = document.getElementById('my-music');
                selectedSongs.forEach(function (song) {
                    const songDetails = song.nextElementSibling.innerHTML;
                    const li = document.createElement('li');
                    li.innerHTML = `<input type="checkbox"> ${songDetails}`;
                    myMusicList.appendChild(li);
                });
            });

            // 재생목록 삭제 기능
            deleteFromPlaylistButton.addEventListener('click', function () {
                const selectedSongs = document.querySelectorAll('#playlist input[type="checkbox"]:checked');
                selectedSongs.forEach(function (song) {
                    song.parentElement.remove();
                });
            });

            // 마이뮤직 삭제 기능
            deleteFromMyMusicButton.addEventListener('click', function () {
                const selectedSongs = document.querySelectorAll('#my-music input[type="checkbox"]:checked');
                selectedSongs.forEach(function (song) {
                    song.parentElement.remove();
                });
            });
        });

        // 음량 슬라이더 값 변경 시 실행되는 함수
        const volumeSlider = document.getElementById('volume-slider');
        volumeSlider?.addEventListener('input', function () {
            const audioPlayer = document.getElementById('audio-player');
            audioPlayer.volume = volumeSlider.value;
        });

        // 재생 목록 생성 (Mock 데이터)
        const songs = [
            { id: 1, title: "HAPPY", artist: "DAY6", url: "song1.mp3" },
            { id: 2, title: "Welcome to the Show", artist: "DAY6", url: "song2.mp3" },
            { id: 3, title: "한 페이지가 될 수 있게", artist: "DAY6", url: "song3.mp3" },
            { id: 4, title: "Supernova", artist: "aespa", url: "song4.mp3" },
            { id: 4, title: "Supernova", artist: "aespa", url: "song4.mp3" },
            { id: 4, title: "Supernova", artist: "aespa", url: "song4.mp3" },
            { id: 4, title: "Supernova", artist: "aespa", url: "song4.mp3" },
            { id: 4, title: "Supernova", artist: "aespa", url: "song4.mp3" },
            { id: 4, title: "Supernova", artist: "aespa", url: "song4.mp3" }
        ];

        // 재생 목록 로드 함수
        function loadPlaylist() {
            const playlist = document.getElementById('playlist');
            playlist.innerHTML = ''; // 초기화
            songs.forEach((song, index) => {
                const li = document.createElement('li');
                li.innerHTML = `<input type="checkbox"> ${song.title} - ${song.artist} <button data-index="${index}" class="play-btn">재생</button>`;
                playlist.appendChild(li);
            });
        }

        // 페이지 로드 시 재생 목록 로드
        window.onload = function () {
            loadPlaylist();
        };

        document.getElementById('like-btn').addEventListener('click', function () {
            this.classList.toggle('liked');
        });
    </script>

</body>

</html>